<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta property="og:site_name" content="Grant J Butler"/>
    <link rel="canonical" href="https://grantjbutler.com/articles/using-tailwind-with-publish"/>
    <meta name="twitter:url" content="https://grantjbutler.com/articles/using-tailwind-with-publish"/>
    <meta property="og:url" content="https://grantjbutler.com/articles/using-tailwind-with-publish"/>
    <title>Making Tailwind and Publish Play Nice With Each Other | Grant J Butler</title>
    <meta name="twitter:title" content="Making Tailwind and Publish Play Nice With Each Other | Grant J Butler"/>
    <meta property="og:title" content="Making Tailwind and Publish Play Nice With Each Other | Grant J Butler"/>
    <meta name="description"/>
    <meta name="twitter:description"/>
    <meta property="og:description"/>
    <meta name="twitter:card" content="summary"/>
    <link rel="stylesheet" href="/styles.css" type="text/css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="shortcut icon" href="/images/favicon.png" type="image/png"/>
    <link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Grant J Butler"/>
  </head>
  <body class="bg-gray-100 text-slate-900">
    <header class="bg-gray-100/[.65] backdrop-blur-md fixed w-full z-50">
      <div class="flex justify-between items-baseline px-4 sm:px-2 py-3 border-b border-gray-400 container mx-auto lg:max-w-[1024px]">
        <h1 class="text-2xl font-semibold">
          <a href="/">Grant J Butler</a></h1>
        <nav class="flex gap-4 items-center">
          <div class="flex gap-2">
            <a href="/articles" class="font-medium text-gray-500 hover:text-gray-600">Articles</a></div>
          <div class="flex gap-2">
            <a href="https://github.com/grantjbutler">
              <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 fill-current text-gray-400 hover:text-gray-500">
                <title>GitHub</title>
                <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path>
              </svg></a>
            <a href="https://hachyderm.io/@grantjbutler" rel="me">
              <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 fill-current text-gray-400 hover:text-gray-500">
                <title>Mastodon</title>
                <path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"></path>
              </svg></a>
            <a href="/feed.rss">
              <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 fill-current text-gray-400 hover:text-gray-500">
                <title>RSS</title>
                <path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"></path>
              </svg></a></div></nav></div></header>
    <div class="pt-24">
      <div class="mb-8">
        <div class="container mx-auto px-4 sm:px-0 md:max-w-[768px]">
          <article>
            <h1 class="text-4xl font-bold mb-4">Making Tailwind and Publish Play Nice With Each Other</h1>
            <div class="mb-3">
              <div class="text-slate-500 text-sm mb-1">
                <time datetime="9/11/2023, 6:25 PM">
                  <span>Sep 11, 2023</span></time>
&mdash;
                <span>8 min</span></div>
              <a href="/tags/blogging" class="bg-blue-100 text-blue-500 py-1 px-2 text-xs rounded-sm">#blogging</a>
              <a href="/tags/tailwind" class="bg-blue-100 text-blue-500 py-1 px-2 text-xs rounded-sm">#tailwind</a>
              <a href="/tags/publish" class="bg-blue-100 text-blue-500 py-1 px-2 text-xs rounded-sm">#publish</a></div>
            <div class="prose max-w-none"><p>I won't lie. I'm not a designer. I may have an intiution about whether something is designed well or not by looking at it, but if you asked me to make something from scratch, while I may be able to make something usable, it's certainly not going to be the best designed thing you've ever seen.</p><p>When it comes to web development, one of the first things I pull into a new project is <a href="https://tailwindcss.com">Tailwind</a>. It's a utility-first CSS framework with some solid defaults that makes it easy to build something that looks good, while not boxing you in to something that looks generic. For someone like me, it's a great tool for helping me build something that looks decent.</p><p>Most of the time, Tailwind gets integrated with other build tools, like webpack or vite, where the generation of your site's styles are just one piece of a larger build process, which may copy images around, compile Vue or React components into straight JavaScript, and more. For this site, though, we're using <a href="https://github.com/johnsundell/Publish">Publish</a> as our static site generator, which doesn't leverage any of these build tools already as part of its site generation process. While we could pull one of them it, it'd be overkill since we wouldn't be using any of their other features.</p><p>Fortunately, in addition to the above integrations with existing frontend built tools, you can run Tailwind directly with a command line tool to generate styles from your source code. With just a little bit of work, we can wrap up calling out to their CLI tool into a <code>PublishingStep</code> to integrate Tailwind into the build pipeline for our Publish site.</p><h2>Installing Tailwind</h2><p>Before we start writing any of the Swift code of our <code>PublishingStep</code>, we need to make sure that Tailwind is installed and properly configured. We can follow the <a href="https://tailwindcss.com/docs/installation">installations docs</a> for their CLI tool, using the root directory of our Swift package as the location of our NPM package. Since we're following the structure of a Swift package for our code, and the structure of a Publish site for our content, we'll need to update our <code>tailwind.config.js</code> file to tell it where to look for styles.</p><pre><code class="language-js"><span class="token comment">/** @type {import('tailwindcss').Config} */</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./Sources/**/*.swift"</span><span class="token punctuation">,</span>
    <span class="token string">"./Content/**/*.{md,html,js}"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">extend</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre><p>The two places that we tell Tailwind to look for styles are our Swift files (so it can detect which styles we may be using in our site's theme), and our content files (so it can detect any styles in any of the Markdown, HTML, or JavaScript files we may write). This is what works for me for my site, so if you have other files that have Tailwind styles, make sure you add the paths to the config file.</p><p>With Tailwind's configuration updated, we can start working on writing the <code>PublishingStep</code> that'll invoke Tailwind.</p><h2>Building the <code>PublishingStep</code></h2><p>First things first, we need to import a few different targets. We need the <code>Publish</code> target, so we can get access to the API we need for creating this <code>PublishingStep</code>. We'll pull in the <code>ShellOut</code> target, to give us a streamlined interface to invoking command line executables, like the Tailwind CLI tool. Finally, we'll pull in the <code>Files</code> target to give us a set of convenience APIs for interacting with the filesystem.</p><p>With the targets imported, we can create the factory method for our <code>PublishingStep</code> that will invoke Tailwind:</p><pre><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Files</span>
<span class="token keyword">import</span> <span class="token class-name">Publish</span>
<span class="token keyword">import</span> <span class="token class-name">ShellOut</span>

<span class="token keyword">extension</span> <span class="token class-name">PublishingStep</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">generateTailwindCSS</span><span class="token punctuation">(</span>
        inputPath<span class="token punctuation">:</span> <span class="token class-name">Path</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Resources/styles.css"</span></span><span class="token punctuation">,</span>
        outputPath<span class="token punctuation">:</span> <span class="token class-name">Path</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"styles.css"</span></span>
    <span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">PublishingStep</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span>named<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Generate Tailwind CSS"</span></span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token punctuation">{</span> context <span class="token keyword">in</span>
            
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>This step takes in two arguments: the source CSS file that has the Tailwind directives in it, and an output file where the generated CSS should be put within Publish's <code>Output</code> folder.</p><p>Now we can start to fill in the body of our step to actually invoke Tailwind:</p><pre><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Files</span>
<span class="token keyword">import</span> <span class="token class-name">Publish</span>
<span class="token keyword">import</span> <span class="token class-name">ShellOut</span>

<span class="token keyword">extension</span> <span class="token class-name">PublishingStep</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">generateTailwindCSS</span><span class="token punctuation">(</span>
        inputPath<span class="token punctuation">:</span> <span class="token class-name">Path</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Resources/styles.css"</span></span><span class="token punctuation">,</span>
        outputPath<span class="token punctuation">:</span> <span class="token class-name">Path</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"styles.css"</span></span>
    <span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">PublishingStep</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span>named<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Generate Tailwind CSS"</span></span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token punctuation">{</span> context <span class="token keyword">in</span>
            <span class="token keyword">try</span> <span class="token function">shellOut</span><span class="token punctuation">(</span>
                to<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"npx"</span></span><span class="token punctuation">,</span>
                arguments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"tailwindcss"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"-i"</span></span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> inputPath<span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"-o"</span></span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">outputFile</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> outputPath<span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"--minify"</span></span><span class="token punctuation">]</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Using the <code>shellOut</code> function provided by the <code>ShellOut</code> package, we run the <code>tailwindcss</code> command by way of <code>npx</code>, providing our source CSS file as the input path and the location where the generated CSS should live as the output path. We also tell Tailwind to minify the CSS, to reduce the size of the generated file. However, if we include this step in our build pipeline and try to run it, we'll run into a few issues.</p><p>First, <code>outputFile(at:)</code> actually expects the file at the given path to exist. Even if all we're wanting to do is determine the path to a file in Publish's <code>Output</code> directory so we can give it to Tailwind, the method will still check to see if the file exists and throw an error if it doesn't. We can work around this by creating the file ourselves before invoking Tailwind by utilizing the <code>createOutputFile(at:)</code> method on the publishing context. Like <code>outputFile(at:)</code>, this method returns a <code>File</code> type, which we can use to get a path to pass on to Tailwind:</p><pre><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Files</span>
<span class="token keyword">import</span> <span class="token class-name">Publish</span>
<span class="token keyword">import</span> <span class="token class-name">ShellOut</span>

<span class="token keyword">extension</span> <span class="token class-name">PublishingStep</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">generateTailwindCSS</span><span class="token punctuation">(</span>
        inputPath<span class="token punctuation">:</span> <span class="token class-name">Path</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Resources/styles.css"</span></span><span class="token punctuation">,</span>
        outputPath<span class="token punctuation">:</span> <span class="token class-name">Path</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"styles.css"</span></span>
    <span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">PublishingStep</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span>named<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Generate Tailwind CSS"</span></span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token punctuation">{</span> context <span class="token keyword">in</span>
            <span class="token keyword">try</span> <span class="token function">shellOut</span><span class="token punctuation">(</span>
                to<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"npx"</span></span><span class="token punctuation">,</span>
                arguments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"tailwindcss"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"-i"</span></span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> inputPath<span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"-o"</span></span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">createOutputFile</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> outputPath<span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"--minify"</span></span><span class="token punctuation">]</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>The next error we'll run in to depends on if we're running our build pipeline from within Xcode. If you're running in Xcode, you'll likely see an error in the console stating that <code>npx</code> cannot be found. Because we're using Publish to generate our site, we end up running a command line executable to perform that work. That executable inherits the environment of where it's running, which includes any modifications you may have made to your <code>$PATH</code> environment variable to locate various executables. Those modifications may not be inherited by Xcode, so when you run from within Xcode, it's likely that <code>npx</code> won't be found and the style generation step will fail.</p><p>To fix this for when we generate our site from within Xcode, we can see if a path to <code>npx</code> has been provided as an environment variable and use that, falling back to just calling <code>npx</code> and letting it be resolved based off of the <code>$PATH</code> in the current environment. Since we'll be using the <code>ProcessInfo</code> type for inspecting the environment, we'll also need to import Foundation to get access to that API:</p><pre><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Files</span>
<span class="token keyword">import</span> <span class="token class-name">Foundation</span>
<span class="token keyword">import</span> <span class="token class-name">Publish</span>
<span class="token keyword">import</span> <span class="token class-name">ShellOut</span>

<span class="token keyword">extension</span> <span class="token class-name">PublishingStep</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">generateTailwindCSS</span><span class="token punctuation">(</span>
        inputPath<span class="token punctuation">:</span> <span class="token class-name">Path</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Resources/styles.css"</span></span><span class="token punctuation">,</span>
        outputPath<span class="token punctuation">:</span> <span class="token class-name">Path</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"styles.css"</span></span>
    <span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">PublishingStep</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span>named<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Generate Tailwind CSS"</span></span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token punctuation">{</span> context <span class="token keyword">in</span>
            <span class="token keyword">try</span> <span class="token function">shellOut</span><span class="token punctuation">(</span>
                to<span class="token punctuation">:</span> <span class="token class-name">ProcessInfo</span><span class="token punctuation">.</span>processInfo<span class="token punctuation">.</span>environment<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"NPX_BINARY"</span></span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"npx"</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                arguments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"tailwindcss"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"-i"</span></span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> inputPath<span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"-o"</span></span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">createOutputFile</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> outputPath<span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"--minify"</span></span><span class="token punctuation">]</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>We can then set the <code>NPX_BINARY</code> environment variable to where <code>npx</code> lives from within the "Run" section of Xcode's Scheme Editor:</p><img src="/img/articles/using-tailwind-with-publish/environment-variables.png" alt="Xcode's Scheme Editor, highlighting the environment variables for the Publish project's scheme, which has an NPX_BINARY key-value pair."/><p>If we try to run our publishing step now, we may get one last error, again stemming from if we're running our build pipeline from within Xcode or not. By default, when Xcode runs a built command line tool, it'll set the working directory for that process to the built products directory, which will usually be some folder that lives in the depths of <code>~/Library/Developer/Xcode/</code>. This folder contains a slew of build artifacts related to your project, including the executable that generates your site, but does not contain your source code, resources, or other content. When you try to run <code>npx</code> from this folder, it can't find an installation of Tailwind to generate the styles. There's a couple of ways we could resolve this problem.</p><p>First, we could fix this from within Xcode by opening the Scheme Editor again and specifying an explicit working directory in the "Options" tab:</p><img src="/img/articles/using-tailwind-with-publish/working-directory.png" alt="Xcode Scheme Editor, showing the "Options" tab where the "Working Directory" option lives, allowing us to customize where the executable runs."/><p>Alternatively, we could fix this by being explicit about in which directory we run <code>npx</code>. By getting a path to the package's root directory and providing that to our <code>shellOut</code> call, we can set the working directory for the invocation of <code>npx</code>, so it can find the Tailwind installation:</p><pre><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">Files</span>
<span class="token keyword">import</span> <span class="token class-name">Foundation</span>
<span class="token keyword">import</span> <span class="token class-name">Publish</span>
<span class="token keyword">import</span> <span class="token class-name">ShellOut</span>

<span class="token keyword">extension</span> <span class="token class-name">PublishingStep</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">generateTailwindCSS</span><span class="token punctuation">(</span>
        inputPath<span class="token punctuation">:</span> <span class="token class-name">Path</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Resources/styles.css"</span></span><span class="token punctuation">,</span>
        outputPath<span class="token punctuation">:</span> <span class="token class-name">Path</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"styles.css"</span></span>
    <span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">PublishingStep</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span>named<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Generate Tailwind CSS"</span></span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token punctuation">{</span> context <span class="token keyword">in</span>
            <span class="token keyword">try</span> <span class="token function">shellOut</span><span class="token punctuation">(</span>
                to<span class="token punctuation">:</span> <span class="token class-name">ProcessInfo</span><span class="token punctuation">.</span>processInfo<span class="token punctuation">.</span>environment<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"NPX_BINARY"</span></span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"npx"</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                arguments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"tailwindcss"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"-i"</span></span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> inputPath<span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"-o"</span></span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">createOutputFile</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> outputPath<span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"--minify"</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                at<span class="token punctuation">:</span> <span class="token keyword">try</span> context<span class="token punctuation">.</span><span class="token function">folder</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"/"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>path
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>With this last change in place, we're in a state where this publishing step works! With this added to our build pipeline, Tailwind will generate someCSS and put it in Publish's <code>Output</code> folder for use in your website. While you can copy the code from this page and pull it into your site, I've gone ahead and bundled it up in its own <a href="https://github.com/grantjbutler/TailwindPublishPlugin">Publish plugin</a>. If you have a need to generate your site's syles with Tailwind, check it out and let me know how it works for you!</p></div></article></div></div></div>
    <footer class="bg-gray-300 py-6 text-gray-500">
      <div>
        <div class="container mx-auto px-4 sm:px-0 md:max-w-[768px]">
          <p class="text-center text-sm">&copy; 2023 Grant J Butler</p></div></div></footer>
  </body>
</html>